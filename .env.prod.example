# Production Environment Variables
# Copy this file to .env.prod and update values
# IMPORTANT: Generate strong random values for all secrets!

# =============================================================================
# Django Configuration
# =============================================================================
SECRET_KEY=generate-strong-random-key-at-least-50-characters
DEBUG=False
ALLOWED_HOSTS=your-domain.com,www.your-domain.com
DJANGO_SETTINGS_MODULE=bot_factory.settings.production
SECURE_SSL_REDIRECT=True
SESSION_COOKIE_SECURE=True
CSRF_COOKIE_SECURE=True
SECURE_HSTS_SECONDS=31536000  # 1 year
SECURE_HSTS_INCLUDE_SUBDOMAINS=True
SECURE_HSTS_PRELOAD=True

# =============================================================================
# Database (PostgreSQL with pgvector)
# =============================================================================
DATABASE_URL=postgresql://botfactory_user:strong-database-password@postgres:5432/botfactory
DB_PASSWORD=strong-database-password
DB_NAME=botfactory
DB_USER=botfactory_user
DB_HOST=postgres
DB_PORT=5432
# Connection pool settings
DB_CONN_MAX_AGE=600
DB_OPTIONS=-c shared_buffers=256MB -c max_connections=200

# =============================================================================
# Redis (caching, rate limiting, Celery)
# =============================================================================
REDIS_URL=redis://:strong-redis-password@redis:6379/0
REDIS_HOST=redis
REDIS_PORT=6379
CELERY_BROKER_URL=redis://:strong-redis-password@redis:6379/0
CELERY_RESULT_BACKEND=redis://:strong-redis-password@redis:6379/0

# =============================================================================
# CORS (Frontend domain)
# =============================================================================
CORS_ALLOWED_ORIGINS=https://your-frontend-domain.com
CORS_ALLOW_CREDENTIALS=True

# =============================================================================
# AI Provider API Keys
# =============================================================================
# Google Gemini (required)
GEMINI_API_KEY=your-gemini-api-key-here

# OpenAI (optional - for multi-provider support)
OPENAI_API_KEY=sk-your-openai-api-key-here
OPENAI_ORGANIZATION=org-your-organization-id

# Anthropic (optional - for multi-provider support)
ANTHROPIC_API_KEY=sk-ant-your-anthropic-api-key-here

# =============================================================================
# Email Configuration (recommended for production)
# =============================================================================
EMAIL_BACKEND=django.core.mail.backends.smtp.EmailBackend
EMAIL_HOST=smtp.gmail.com
EMAIL_PORT=587
EMAIL_USE_TLS=True
EMAIL_HOST_USER=your-email@gmail.com
EMAIL_HOST_PASSWORD=your-app-specific-password
DEFAULT_FROM_EMAIL=noreply@your-domain.com
SERVER_EMAIL=server@your-domain.com
ADMIN_EMAIL=admin@your-domain.com

# =============================================================================
# Error Tracking & Monitoring (recommended)
# =============================================================================
SENTRY_DSN=https://your-sentry-dsn@sentry.io/project-id
SENTRY_ENVIRONMENT=production
SENTRY_TRACESAMPLE_RATE=0.1

# Prometheus metrics (optional)
PROMETHEUS_ENABLED=True
PROMETHEUS_PUSH_GATEWAY=https://your-push-gateway-url

# =============================================================================
# Webhook Configuration
# =============================================================================
WEBHOOK_BASE_URL=https://your-domain.com
WEBHOOK_SECRET=generate-random-webhook-secret

# =============================================================================
# Rate Limiting
# =============================================================================
RATELIMIT_ENABLE=True
RATELIMIT_USE_CACHE=True
THROTTLE_RATE=100/hour  # Per-user rate limit

# =============================================================================
# Security Settings
# =============================================================================
SECURE_PROXY_SSL_HEADER=HTTP_X_FORWARDED_PROTO,HTTP_X_FORWARDED_HOST
SECURE_REFERRER_POLICY=same-origin
SECURE_CONTENT_TYPE_NOSNIFF=True
SECURE_BROWSER_XSS_FILTER=True
SECURE_XSS_PROTECTION=True

# =============================================================================
# Admin Configuration
# =============================================================================
ADMIN_USERNAME=admin
ADMIN_EMAIL=admin@your-domain.com
ADMINS=your-email@gmail.com

# =============================================================================
# Log Configuration
# =============================================================================
LOG_LEVEL=INFO
LOG_FORMAT=json
SENTRY_LOG_LEVEL=WARNING

# =============================================================================
# Media & Static Files
# =============================================================================
MEDIA_ROOT=/var/www/bot-factory/media
STATIC_ROOT=/var/www/bot-factory/static
STATIC_URL=/static/
MEDIA_URL=/media/

# =============================================================================
# Celery Configuration
# =============================================================================
CELERY_TASK_ALWAYS_EAGER=False
CELERY_TASK_ACKS_LATE=True
CELERY_TASK_TIME_LIMIT=30*60  # 30 minutes
CELERY_WORKER_PREFETCH_MULTIPLIER=4
CELERY_WORKER_MAX_CONCURRENCY=10

# =============================================================================
# Bot Service Configuration
# =============================================================================
BOT_SERVICE_HOST=bot-service
BOT_SERVICE_PORT=8001
BOT_LOG_LEVEL=INFO

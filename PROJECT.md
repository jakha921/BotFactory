# Bot Factory - –ü–ª–∞—Ç—Ñ–æ—Ä–º–∞ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è AI-–±–æ—Ç–æ–≤

## üìã –û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞

**Bot Factory** - —ç—Ç–æ SaaS-–ø–ª–∞—Ç—Ñ–æ—Ä–º–∞ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è AI-–±–æ—Ç–∞–º–∏ —Å –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–µ–π Telegram –∏ Google Gemini. –ü–ª–∞—Ç—Ñ–æ—Ä–º–∞ –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º —Å–æ–∑–¥–∞–≤–∞—Ç—å –Ω–µ–æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —É–º–Ω—ã—Ö –±–æ—Ç–æ–≤ –±–µ–∑ –Ω–∞–ø–∏—Å–∞–Ω–∏—è –∫–æ–¥–∞, –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞—è –∏—Ö —á–µ—Ä–µ–∑ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å.

### –ö–ª—é—á–µ–≤—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- ‚ú® **–°–æ–∑–¥–∞–Ω–∏–µ AI-–±–æ—Ç–æ–≤ –±–µ–∑ –∫–æ–¥–∞** - –∏–Ω—Ç—É–∏—Ç–∏–≤–Ω—ã–π –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –±–æ—Ç–æ–≤
- ü§ñ **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Telegram** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ –±–æ—Ç–æ–≤ –≤ Telegram
- üß† **Google Gemini AI** - –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —è–∑—ã–∫–æ–≤—ã—Ö –º–æ–¥–µ–ª–µ–π –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –æ—Ç–≤–µ—Ç–æ–≤
- üìö **–ë–∞–∑–∞ –∑–Ω–∞–Ω–∏–π** - –∑–∞–≥—Ä—É–∑–∫–∞ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ –∏ —Ç–µ–∫—Å—Ç–æ–≤—ã—Ö —Ñ—Ä–∞–≥–º–µ–Ω—Ç–æ–≤ –¥–ª—è –æ–±—É—á–µ–Ω–∏—è –±–æ—Ç–æ–≤
- üí¨ **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–∏–∞–ª–æ–≥–∞–º–∏** - –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –∏ –∞–Ω–∞–ª–∏–∑ –≤—Å–µ—Ö —Ä–∞–∑–≥–æ–≤–æ—Ä–æ–≤
- üìä **–ê–Ω–∞–ª–∏—Ç–∏–∫–∞** - –ø–æ–¥—Ä–æ–±–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –∏ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏
- üîê **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å** - —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ —Ç–æ–∫–µ–Ω–æ–≤, JWT –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è, –∑–∞—â–∏—Ç–∞ API
- üöÄ **–ú—É–ª—å—Ç–∏–±–æ—Ç —Å–∏—Å—Ç–µ–º–∞** - –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–µ—Å–∫–æ–ª—å–∫–∏–º–∏ –±–æ—Ç–∞–º–∏
- üîÑ **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è** - –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∞—è –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∞ –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

---

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

### –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Å–∏—Å—Ç–µ–º—ã

```
bot-factory/
‚îú‚îÄ‚îÄ backend/          # Django REST Framework API (Python 3.11+)
‚îÇ   ‚îú‚îÄ‚îÄ apps/         # –ü—Ä–∏–ª–æ–∂–µ–Ω–∏—è Django
‚îÇ   ‚îú‚îÄ‚îÄ services/     # –í–Ω–µ—à–Ω–∏–µ —Å–µ—Ä–≤–∏—Å—ã (Gemini API)
‚îÇ   ‚îú‚îÄ‚îÄ core/         # –£—Ç–∏–ª–∏—Ç—ã –∏ middleware
‚îÇ   ‚îî‚îÄ‚îÄ bot_factory/  # –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–æ–µ–∫—Ç–∞
‚îú‚îÄ‚îÄ bot/              # Telegram Bot Service (aiogram 3.x)
‚îÇ   ‚îú‚îÄ‚îÄ handlers/     # –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∫–æ–º–∞–Ω–¥ –∏ —Å–æ–æ–±—â–µ–Ω–∏–π
‚îÇ   ‚îú‚îÄ‚îÄ services/     # –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞ –±–æ—Ç–æ–≤
‚îÇ   ‚îú‚îÄ‚îÄ integrations/ # –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Django ORM
‚îÇ   ‚îî‚îÄ‚îÄ main.py       # –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞
‚îú‚îÄ‚îÄ frontend/         # Admin Panel (React + TypeScript + Vite)
‚îÇ   ‚îú‚îÄ‚îÄ pages/        # –°—Ç—Ä–∞–Ω–∏—Ü—ã –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ components/   # React –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
‚îÇ   ‚îú‚îÄ‚îÄ store/        # Zustand state management
‚îÇ   ‚îî‚îÄ‚îÄ services/     # API –∫–ª–∏–µ–Ω—Ç
‚îî‚îÄ‚îÄ docker-compose.yml  # PostgreSQL + Redis
```

### –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—è | –í–µ—Ä—Å–∏—è | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ |
|-----------|------------|--------|------------|
| **Backend** | Django | 5.0 | REST API, –∞–¥–º–∏–Ω–∫–∞, –º–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö |
| | Django REST Framework | 3.14+ | RESTful API endpoints |
| | PostgreSQL | 15 | –û—Å–Ω–æ–≤–Ω–∞—è –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö |
| | pgvector | - | –í–µ–∫—Ç–æ—Ä–Ω—ã–µ —ç–º–±–µ–¥–¥–∏–Ω–≥–∏ –¥–ª—è RAG |
| | Redis | - | –ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ, rate limiting |
| | Celery | - | –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–µ –∑–∞–¥–∞—á–∏ |
| **Bot** | aiogram | 3.x | Multi-bot Telegram polling |
| | Google Gemini API | - | AI –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—Ç–≤–µ—Ç–æ–≤ |
| **Frontend** | React | 19 | –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å |
| | TypeScript | 5.x | –¢–∏–ø–∏–∑–∞—Ü–∏—è |
| | Vite | - | –°–±–æ—Ä—â–∏–∫ –∏ dev-—Å–µ—Ä–≤–µ—Ä |
| | Zustand | - | State management |
| | TailwindCSS | - | –°—Ç–∏–ª–∏–∑–∞—Ü–∏—è |
| **Deployment** | Docker | - | –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏—è |
| | Nginx | - | Reverse proxy, —Å—Ç–∞—Ç–∏–∫–∞ |
| | Gunicorn | - | WSGI —Å–µ—Ä–≤–µ—Ä |

---

## üìä –ú–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö

### –û—Å–Ω–æ–≤–Ω—ã–µ –º–æ–¥–µ–ª–∏

#### User (apps/accounts)
–ú–æ–¥–µ–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π JWT –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏.

```python
- id: UUID (PK)
- email: EmailField (unique, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –≤—Ö–æ–¥–∞)
- name: CharField (–ø–æ–ª–Ω–æ–µ –∏–º—è)
- password: CharField (—Ö–µ—à–∏—Ä–æ–≤–∞–Ω–Ω—ã–π)
- plan: CharField (Free/Pro/Enterprise)
- telegram_id: BigIntegerField (–¥–ª—è admin –¥–æ—Å—Ç—É–ø–∞ –∫ –±–æ—Ç–∞–º)
- avatar: CharField (URL –∏–ª–∏ –ø—É—Ç—å)
- is_active, is_staff, is_superuser: BooleanField
- created_at, updated_at: DateTimeField
```

#### Bot (apps/bots)
–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è AI-–±–æ—Ç–∞.

```python
- id: UUID (PK)
- owner: FK(User)
- name: CharField (–Ω–∞–∑–≤–∞–Ω–∏–µ –±–æ—Ç–∞)
- description: TextField
- status: CharField (draft/active/paused/error)
- model: CharField (gemini-2.5-flash, gpt-4, etc.)
- provider: CharField (gemini/openai/anthropic)
- temperature: FloatField (0-2, –∫—Ä–µ–∞—Ç–∏–≤–Ω–æ—Å—Ç—å –æ—Ç–≤–µ—Ç–æ–≤)
- system_instruction: TextField (–∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –¥–ª—è AI)
- thinking_budget: IntegerField (–¥–ª—è thinking –º–æ–¥–µ–ª–µ–π)
- telegram_token: CharField (–∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–Ω—ã–π —Ç–æ–∫–µ–Ω)
- webhook_secret: CharField (–≤–∞–ª–∏–¥–∞—Ü–∏—è webhook)
- avatar: CharField (—ç–º–æ–¥–∑–∏ –∏–ª–∏ URL)
- ui_config: JSONField (–∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã, —Ñ–æ—Ä–º—ã)
- welcome_message: TextField (–ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ /start)
- help_message: TextField (–ø–æ–º–æ—â—å /help)
- created_at, updated_at: DateTimeField
```

#### TelegramUser (apps/telegram)
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ Telegram, –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤—É—é—â–∏–µ —Å –±–æ—Ç–∞–º–∏.

```python
- id: UUID (PK)
- telegram_id: BigIntegerField (ID –≤ Telegram)
- bot: FK(Bot)
- username, first_name, last_name: CharField
- status: CharField (active/blocked)
- message_count: IntegerField
- first_seen, last_active: DateTimeField
```

#### ChatSession (apps/chat)
–°–µ—Å—Å–∏—è –¥–∏–∞–ª–æ–≥–∞ –º–µ–∂–¥—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º –∏ –±–æ—Ç–æ–º.

```python
- id: UUID (PK)
- bot: FK(Bot)
- user: FK(TelegramUser)
- sentiment: CharField (positive/neutral/negative)
- is_flagged: BooleanField (–ø–æ–º–µ—á–µ–Ω–æ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏)
- created_at, updated_at: DateTimeField
```

#### ChatMessage (apps/chat)
–°–æ–æ–±—â–µ–Ω–∏–µ –≤ –¥–∏–∞–ª–æ–≥–µ.

```python
- id: UUID (PK)
- session: FK(ChatSession)
- role: CharField (user/model)
- content: TextField (—Ç–µ–∫—Å—Ç —Å–æ–æ–±—â–µ–Ω–∏—è)
- is_thinking: BooleanField (—Ä–µ–∂–∏–º —Ä–∞–∑–º—ã—à–ª–µ–Ω–∏—è)
- attachments: JSONField (—Ñ–∞–π–ª—ã, –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è)
- timestamp: DateTimeField
```

#### Document (apps/knowledge)
–î–æ–∫—É–º–µ–Ω—Ç—ã –¥–ª—è –±–∞–∑—ã –∑–Ω–∞–Ω–∏–π –±–æ—Ç–∞.

```python
- id: UUID (PK)
- bot: FK(Bot)
- file: FileField (–∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã–π —Ñ–∞–π–ª)
- uploaded_at: DateTimeField
```

#### TextSnippet (apps/knowledge)
–¢–µ–∫—Å—Ç–æ–≤—ã–µ —Ñ—Ä–∞–≥–º–µ–Ω—Ç—ã –¥–ª—è –±–∞–∑—ã –∑–Ω–∞–Ω–∏–π.

```python
- id: UUID (PK)
- bot: FK(Bot)
- title: CharField
- content: TextField
- tags: JSONField
- embedding: VectorField(768) - –≤–µ–∫—Ç–æ—Ä–Ω–æ–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–µ –¥–ª—è RAG
- created_at, updated_at: DateTimeField
```

---

## üîÑ –ü–æ—Ç–æ–∫ –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏–π

```mermaid
sequenceDiagram
    participant U as –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å Telegram
    participant A as aiogram Bot (Polling)
    participant D as Django Backend
    participant G as Google Gemini API
    
    U->>A: –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ
    A->>D: get_bot_by_token() - –ø–æ–∏—Å–∫ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
    D-->>A: –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –±–æ—Ç–∞
    A->>D: get_or_create_telegram_user()
    D-->>A: TelegramUser
    A->>D: process_message() - –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ —Ç–µ–∫—Å—Ç–∞
    Note over A,D: –ü–æ–¥–¥–µ—Ä–∂–∫–∞: —Ç–µ–∫—Å—Ç, –∞—É–¥–∏–æ, —Ñ–∞–π–ª—ã, –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
    A->>D: –ü–æ–ª—É—á–µ–Ω–∏–µ –±–∞–∑—ã –∑–Ω–∞–Ω–∏–π (snippets + documents)
    A->>D: –ü–æ–ª—É—á–µ–Ω–∏–µ –∏—Å—Ç–æ—Ä–∏–∏ —á–∞—Ç–∞ (–ø–æ—Å–ª–µ–¥–Ω–∏–µ 10 —Å–æ–æ–±—â–µ–Ω–∏–π)
    A->>G: generate_bot_response() —Å –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–º
    G-->>A: AI –æ—Ç–≤–µ—Ç
    A->>D: –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ ChatMessage
    A->>U: –û—Ç–ø—Ä–∞–≤–∫–∞ –æ—Ç–≤–µ—Ç–∞ –≤ Telegram
```

### –≠—Ç–∞–ø—ã –æ–±—Ä–∞–±–æ—Ç–∫–∏

1. **–ü–æ–ª—É—á–µ–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è** - aiogram polling –ø–æ–ª—É—á–∞–µ—Ç update –æ—Ç Telegram
2. **–ò–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –±–æ—Ç–∞** - –ø–æ–∏—Å–∫ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –ø–æ —Ç–æ–∫–µ–Ω—É (—Å —Ä–∞—Å—à–∏—Ñ—Ä–æ–≤–∫–æ–π)
3. **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å** - —Å–æ–∑–¥–∞–Ω–∏–µ/–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ TelegramUser
4. **–ò–∑–≤–ª–µ—á–µ–Ω–∏–µ —Ç–µ–∫—Å—Ç–∞** - –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Ç–µ–∫—Å—Ç–∞, –∞—É–¥–∏–æ, –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤, –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
5. **–ö–æ–Ω—Ç–µ–∫—Å—Ç** - –∑–∞–≥—Ä—É–∑–∫–∞ –±–∞–∑—ã –∑–Ω–∞–Ω–∏–π –∏ –∏—Å—Ç–æ—Ä–∏–∏ —á–∞—Ç–∞
6. **–ì–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—Ç–≤–µ—Ç–∞** - –≤—ã–∑–æ–≤ Gemini API —Å system_instruction –∏ –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–º
7. **–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ** - –∑–∞–ø–∏—Å—å —Å–æ–æ–±—â–µ–Ω–∏—è –≤ –ë–î
8. **–û—Ç–ø—Ä–∞–≤–∫–∞** - –æ—Ç–ø—Ä–∞–≤–∫–∞ –æ—Ç–≤–µ—Ç–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é

---

## üîê –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### –®–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ —Ç–æ–∫–µ–Ω–æ–≤

Telegram bot —Ç–æ–∫–µ–Ω—ã —à–∏—Ñ—Ä—É—é—Ç—Å—è –ø–µ—Ä–µ–¥ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º –≤ –ë–î:

- **–ê–ª–≥–æ—Ä–∏—Ç–º**: Fernet (AES)
- **–ö–ª—é—á**: –ø—Ä–æ–∏–∑–≤–æ–¥–Ω—ã–π –æ—Ç `settings.SECRET_KEY`
- **–ò–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è**: –∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ç–æ–∫–µ–Ω—ã –Ω–∞—á–∏–Ω–∞—é—Ç—Å—è —Å `gAAAAAB`
- **–†–∞—Å—à–∏—Ñ—Ä–æ–≤–∫–∞**: —á–µ—Ä–µ–∑ —Å–≤–æ–π—Å—Ç–≤–æ `Bot.decrypted_telegram_token`

### –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è

- **JWT —Ç–æ–∫–µ–Ω—ã** - –¥–æ—Å—Ç—É–ø –∫ API
- **Access token**: 30 –º–∏–Ω—É—Ç
- **Refresh token**: 7 –¥–Ω–µ–π
- **Rotation**: –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Ä–æ—Ç–∞—Ü–∏—è —Å blacklist

### –ü—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞

–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—ã –æ–ø—Ä–µ–¥–µ–ª—è—é—Ç—Å—è –ø–æ `User.telegram_id`:
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –¥–æ–±–∞–≤–ª—è–µ—Ç —Å–≤–æ–π Telegram ID –≤ –ø—Ä–æ—Ñ–∏–ª—å
- –ü—Ä–∏ –∑–∞–ø—É—Å–∫–µ –±–æ—Ç–∞ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è ID –≤—Å–µ—Ö staff/superuser
- –ê–¥–º–∏–Ω—ã –ø–æ–ª—É—á–∞—é—Ç —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã –≤ –±–æ—Ç–µ

---

## üì° API Endpoints

### Authentication
- `POST /api/v1/auth/register/` - —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- `POST /api/v1/auth/login/` - –≤—Ö–æ–¥ (–ø–æ–ª—É—á–µ–Ω–∏–µ JWT)
- `POST /api/v1/auth/refresh/` - –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–∞
- `GET /api/v1/auth/profile/` - –ø—Ä–æ—Ñ–∏–ª—å —Ç–µ–∫—É—â–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

### Bots
- `GET /api/v1/bots/` - —Å–ø–∏—Å–æ–∫ –±–æ—Ç–æ–≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- `POST /api/v1/bots/` - —Å–æ–∑–¥–∞–Ω–∏–µ –±–æ—Ç–∞
- `GET /api/v1/bots/{id}/` - –¥–µ—Ç–∞–ª–∏ –±–æ—Ç–∞
- `PUT /api/v1/bots/{id}/` - –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –±–æ—Ç–∞
- `DELETE /api/v1/bots/{id}/` - —É–¥–∞–ª–µ–Ω–∏–µ –±–æ—Ç–∞
- `POST /api/v1/bots/{id}/test-telegram-connection/` - –ø—Ä–æ–≤–µ—Ä–∫–∞ —Ç–æ–∫–µ–Ω–∞
- `GET /api/v1/bots/{id}/bot-status/` - —Å—Ç–∞—Ç—É—Å —Ä–∞–±–æ—Ç—ã –±–æ—Ç–∞

### Knowledge Base
- `GET /api/v1/bots/{id}/documents/` - —Å–ø–∏—Å–æ–∫ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
- `POST /api/v1/bots/{id}/documents/` - –∑–∞–≥—Ä—É–∑–∫–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞
- `GET /api/v1/bots/{id}/snippets/` - —Ç–µ–∫—Å—Ç–æ–≤—ã–µ —Ñ—Ä–∞–≥–º–µ–Ω—Ç—ã
- `POST /api/v1/bots/{id}/snippets/` - —Å–æ–∑–¥–∞–Ω–∏–µ —Ñ—Ä–∞–≥–º–µ–Ω—Ç–∞

### Chat
- `GET /api/v1/bots/{id}/sessions/` - —Å–µ—Å—Å–∏–∏ —á–∞—Ç–∞
- `GET /api/v1/sessions/{id}/messages/` - —Å–æ–æ–±—â–µ–Ω–∏—è —Å–µ—Å—Å–∏–∏

### Analytics
- `GET /api/v1/analytics/stats/` - –æ–±—â–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞

---

## üöÄ –ó–∞–ø—É—Å–∫ –ø—Ä–æ–µ–∫—Ç–∞

### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- Python 3.11+
- Node.js 18+
- PostgreSQL 15+ (–∏–ª–∏ SQLite –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏)
- Redis (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ, –¥–ª—è production)

### Backend (Django)

```bash
cd backend

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π (—Å uv)
uv venv
source .venv/bin/activate
uv pip install -r requirements/base.txt

# –ò–ª–∏ —Å –æ–±—ã—á–Ω—ã–º pip
python -m venv .venv
source .venv/bin/activate
pip install -r requirements/base.txt

# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è
cp .env.example .env
# –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å .env

# –ú–∏–≥—Ä–∞—Ü–∏–∏
python manage.py migrate

# –°–æ–∑–¥–∞–Ω–∏–µ —Å—É–ø–µ—Ä–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
python manage.py createsuperuser

# –ó–∞–ø—É—Å–∫
python manage.py runserver 0.0.0.0:8000
# –∏–ª–∏
./runserver.sh
```

### Bot Service (aiogram)

```bash
# –í–ê–ñ–ù–û: –∑–∞–ø—É—Å–∫–∞—Ç—å –∏–∑ –∫–æ—Ä–Ω—è –ø—Ä–æ–µ–∫—Ç–∞!
cd /path/to/bot-factory
export PYTHONPATH="$(pwd):$PYTHONPATH"

cd bot

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
source .venv/bin/activate
pip install -r requirements.txt

# –ù–∞—Å—Ç—Ä–æ–π–∫–∞
cp .env.example .env
# –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å .env

# –ó–∞–ø—É—Å–∫
python main.py
# –∏–ª–∏
./run_bot.sh
```

### Frontend (React)

```bash
cd frontend

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
npm install

# –ó–∞–ø—É—Å–∫ dev-—Å–µ—Ä–≤–µ—Ä–∞
npm run dev

# –°–±–æ—Ä–∫–∞ –¥–ª—è production
npm run build
```

### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ start_all.sh

–î–ª—è —É–¥–æ–±—Å—Ç–≤–∞ –µ—Å—Ç—å —Å–∫—Ä–∏–ø—Ç –∑–∞–ø—É—Å–∫–∞ –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤:

```bash
./start_all.sh
```

–û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –≤—Å–µ —Å–µ—Ä–≤–∏—Å—ã:

```bash
./stop_all.sh
```

---

## üê≥ Docker Deployment

### Development

```bash
docker-compose up -d
```

### Production

```bash
# –ù–∞—Å—Ç—Ä–æ–π–∫–∞
cp .env.prod.example .env.prod
nano .env.prod

# –î–µ–ø–ª–æ–π
chmod +x deploy.sh
./deploy.sh
```

–ü–æ–¥—Ä–æ–±–Ω–µ–µ –≤ [DEPLOYMENT.md](DEPLOYMENT.md).

---

## ü§ñ –°–æ–∑–¥–∞–Ω–∏–µ –±–æ—Ç–∞

### –ß–µ—Ä–µ–∑ Django Admin

1. –û—Ç–∫—Ä—ã—Ç—å `http://localhost:8000/admin/`
2. –ü–µ—Ä–µ–π—Ç–∏ –≤ **Bots** ‚Üí **Add Bot**
3. –ó–∞–ø–æ–ª–Ω–∏—Ç—å –ø–æ–ª—è:
   - **Name**: –Ω–∞–∑–≤–∞–Ω–∏–µ –±–æ—Ç–∞
   - **Status**: Active
   - **Model**: –≤—ã–±—Ä–∞—Ç—å –º–æ–¥–µ–ª—å (gemini-2.5-flash)
   - **Provider**: Gemini
   - **Telegram Token**: —Ç–æ–∫–µ–Ω –æ—Ç @BotFather
   - **System Instruction**: –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –¥–ª—è AI
   - **Welcome Message**: –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ
   - **Help Message**: —Ç–µ–∫—Å—Ç –ø–æ–º–æ—â–∏
4. –°–æ—Ö—Ä–∞–Ω–∏—Ç—å

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Admin –¥–æ—Å—Ç—É–ø–∞

1. –ü–µ—Ä–µ–π—Ç–∏ –≤ **Users** ‚Üí –≤—ã–±—Ä–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
2. –î–æ–±–∞–≤–∏—Ç—å **Telegram ID** (—Å–≤–æ–π ID –∏–∑ Telegram)
3. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å `is_staff=True` –∏–ª–∏ `is_superuser=True`
4. –°–æ—Ö—Ä–∞–Ω–∏—Ç—å

### –ó–∞–ø—É—Å–∫ –±–æ—Ç–∞

Bot Service –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:
- –û–±–Ω–∞—Ä—É–∂–∏—Ç –Ω–æ–≤—ã–π –∞–∫—Ç–∏–≤–Ω—ã–π –±–æ—Ç
- –ó–∞–ø—É—Å—Ç–∏—Ç –µ–≥–æ –≤ —Ç–µ—á–µ–Ω–∏–µ 30 —Å–µ–∫—É–Ω–¥ (BotMonitor)
- –ù–∞—á–Ω–µ—Ç –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å —Å–æ–æ–±—â–µ–Ω–∏—è

---

## üéØ –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

### –ú—É–ª—å—Ç–∏–±–æ—Ç —Å–∏—Å—Ç–µ–º–∞

- **–î–∏–Ω–∞–º–∏—á–µ—Å–∫–∞—è –∑–∞–≥—Ä—É–∑–∫–∞**: –≤—Å–µ –∞–∫—Ç–∏–≤–Ω—ã–µ –±–æ—Ç—ã (`status='active'`) –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ
- **BotMonitor**: –∫–∞–∂–¥—ã–µ 30 —Å–µ–∫—É–Ω–¥ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ –ë–î
- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Ä–µ—Å—Ç–∞—Ä—Ç**: –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –±–æ—Ç –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è
- **–ò–∑–æ–ª—è—Ü–∏—è**: –∫–∞–∂–¥—ã–π –±–æ—Ç —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ –æ—Ç–¥–µ–ª—å–Ω–æ–π asyncio.Task
- **–û—Ç–∫–∞–∑–æ—É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç—å**: –ø–∞–¥–µ–Ω–∏–µ –æ–¥–Ω–æ–≥–æ –±–æ—Ç–∞ –Ω–µ –≤–ª–∏—è–µ—Ç –Ω–∞ –¥—Ä—É–≥–∏–µ

### AI –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—Ç–≤–µ—Ç–æ–≤

- **–ö–æ–Ω—Ç–µ–∫—Å—Ç**: —É—á–∏—Ç—ã–≤–∞–µ—Ç system_instruction, –±–∞–∑—É –∑–Ω–∞–Ω–∏–π –∏ –∏—Å—Ç–æ—Ä–∏—é
- **–ò—Å—Ç–æ—Ä–∏—è**: –ø–æ—Å–ª–µ–¥–Ω–∏–µ 10 —Å–æ–æ–±—â–µ–Ω–∏–π –¥–ª—è –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞
- **–¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞**: –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º–∞—è –∫—Ä–µ–∞—Ç–∏–≤–Ω–æ—Å—Ç—å (0-2)
- **Thinking mode**: –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –º–æ–¥–µ–ª–µ–π —Å —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–º —Ä–∞–∑–º—ã—à–ª–µ–Ω–∏–µ–º
- **RAG**: –≤–µ–∫—Ç–æ—Ä–Ω—ã–π –ø–æ–∏—Å–∫ –ø–æ –±–∞–∑–µ –∑–Ω–∞–Ω–∏–π (pgvector)

### –ë–∞–∑–∞ –∑–Ω–∞–Ω–∏–π

- **–î–æ–∫—É–º–µ–Ω—Ç—ã**: PDF, DOCX, TXT, MD
- **–§—Ä–∞–≥–º–µ–Ω—Ç—ã**: —Ç–µ–∫—Å—Ç–æ–≤—ã–µ –±–ª–æ–∫–∏ —Å —Ç–µ–≥–∞–º–∏
- **–≠–º–±–µ–¥–¥–∏–Ω–≥–∏**: –≤–µ–∫—Ç–æ—Ä–Ω–æ–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–µ –¥–ª—è —Å–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–æ–≥–æ –ø–æ–∏—Å–∫–∞
- **–ö–æ–Ω—Ç–µ–∫—Å—Ç**: –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è –∫ –∑–∞–ø—Ä–æ—Å–∞–º

---

## üìà –ê–Ω–∞–ª–∏—Ç–∏–∫–∞

–°–∏—Å—Ç–µ–º–∞ —Å–æ–±–∏—Ä–∞–µ—Ç —Å–ª–µ–¥—É—é—â—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é:

- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–æ–æ–±—â–µ–Ω–∏–π –ø–æ –±–æ—Ç–∞–º
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —É–Ω–∏–∫–∞–ª—å–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- –ê–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –ø–æ –≤—Ä–µ–º–µ–Ω–∏
- –ù–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ –¥–∏–∞–ª–æ–≥–æ–≤ (sentiment analysis)
- –ü–æ–ø—É–ª—è—Ä–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã

---

## üõ†Ô∏è Troubleshooting

### –ë–æ—Ç –Ω–µ –æ—Ç–≤–µ—á–∞–µ—Ç

1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å –±–æ—Ç–∞: `GET /api/v1/bots/{id}/bot-status/`
2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏: `logs/backend.log`
3. –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ `status='active'`
4. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ç–æ–∫–µ–Ω: Test Connection –≤ –∞–¥–º–∏–Ω–∫–µ

### –û—à–∏–±–∫–∞ "No module named 'bot'"

–ó–∞–ø—É—Å–∫–∞—Ç—å –∏–∑ –∫–æ—Ä–Ω—è –ø—Ä–æ–µ–∫—Ç–∞ —Å —É—Å—Ç–∞–Ω–æ–≤–∫–æ–π PYTHONPATH:

```bash
export PYTHONPATH="$(pwd):$PYTHONPATH"
cd bot
python main.py
```

### TelegramConflictError

–î—Ä—É–≥–æ–π —ç–∫–∑–µ–º–ø–ª—è—Ä –±–æ—Ç–∞ —É–∂–µ –∑–∞–ø—É—â–µ–Ω. –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –≤—Å–µ –ø—Ä–æ—Ü–µ—Å—Å—ã:

```bash
./stop_all.sh
# –∏–ª–∏
ps aux | grep main.py
kill <PID>
```

### Vector embeddings fail

–ü–µ—Ä–µ–∫–ª—é—á–∏—Ç—å—Å—è —Å SQLite –Ω–∞ PostgreSQL —Å —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ–º pgvector.

---

## üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- [AGENT_DOCUMENTATION.md](AGENT_DOCUMENTATION.md) - —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –¥–ª—è AI-–∞—Å—Å–∏—Å—Ç–µ–Ω—Ç–æ–≤
- [DEPLOYMENT.md](DEPLOYMENT.md) - —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—é –≤ production
- [backend/README.md](backend/README.md) - –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –±—ç–∫–µ–Ω–¥–∞
- [bot/README.md](bot/README.md) - –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –±–æ—Ç-—Å–µ—Ä–≤–∏—Å–∞
- [frontend/README.md](frontend/README.md) - –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞

---

## üîß –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

**Backend:**
```bash
cd backend
uv add <package-name>
```

**Bot:**
```bash
cd bot
uv pip install <package-name>
uv pip freeze > requirements.txt
```

**Frontend:**
```bash
cd frontend
npm install <package-name>
```

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

```bash
# Backend
cd backend
python manage.py test

# Frontend
cd frontend
npm run test
```

### –ö–æ–¥ —Å—Ç–∏–ª—å

- **Backend**: —Å–ª–µ–¥–æ–≤–∞—Ç—å PEP 8
- **Frontend**: ESLint + Prettier
- **Commits**: –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ conventional commits

---

## üìÑ –õ–∏—Ü–µ–Ω–∑–∏—è

–ü—Ä–æ–µ–∫—Ç —Ä–∞–∑—Ä–∞–±–æ—Ç–∞–Ω –¥–ª—è SaaS –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã Bot Factory.

---

## üë• –ö–æ–Ω—Ç–∞–∫—Ç—ã

–î–ª—è –≤–æ–ø—Ä–æ—Å–æ–≤ –∏ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–π –æ–±—Ä–∞—â–∞–π—Ç–µ—Å—å –∫ –∫–æ–º–∞–Ω–¥–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏.

---

**–í–µ—Ä—Å–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏**: 1.0  
**–î–∞—Ç–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è**: 2025-12-27
